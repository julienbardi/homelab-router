# domain.yaml

servers:
  # Machines that can host WireGuard interfaces
  router:
    mgmt_ip:
      ipv4: 10.89.12.1
      ipv6: fd89:7a3b:42c0::1

  nas:
    mgmt_ip:
      ipv4: 10.89.12.4
      ipv6: fd89:7a3b:42c0::4

nodes:
  - julie-omen30l
  - julie-s22
  - julie-acer
  - julie-elitebook

interfaces:
  # Router-hosted WireGuard server
  wgs1:
    server: router

    endpoint:
      host: vpn.bardi.ch
      port: 51820

    lan_subnets:
      - 10.89.12.0/24
      - fd89:7a3b:42c0::/64

    vpn_subnet:
      ipv4: 10.89.13.0/24
      ipv6: fd89:7a3b:42c0:13::/64

    internet: true
    ipv6: true

  # NAS-hosted WireGuard server (benchmark / alternate endpoint)
  wg1:
    server: nas

    endpoint:
      host: vpn.bardi.ch
      port: 51421

    lan_subnets:
      - 10.89.12.0/24

    vpn_subnet:
      ipv4: 10.89.1.0/24

    internet: false
    ipv6: false

profiles:
  profile-split:
    lan: true
    internet: false

  profile-full:
    lan: true
    internet: true

constraints:
  - iface: wgs1
    allow_profiles:
      - profile-split
      - profile-full

  - iface: wg1
    allow_profiles:
      - profile-split
